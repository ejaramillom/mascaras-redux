{"version":3,"sources":["../../../src/components/dropdown/dropdown.js"],"names":["React","useEffect","useRef","useState","PropTypes","classnames","CONSTANTS","DropdownItem","DropdownDivider","Button","Element","colors","concat","Object","values","COLORS","Dropdown","className","children","value","color","align","right","up","hoverable","label","onChange","closeOnSelect","icon","domRef","props","ref","isOpen","setIsOpen","close","evt","current","contains","target","onSelect","selectedValue","window","addEventListener","removeEventListener","childrenArray","Children","map","child","i","type","cloneElement","active","onClick","o","Item","Divider","propTypes","any","func","oneOf","bool","node","defaultProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\n\nimport CONSTANTS from '../../constants';\nimport DropdownItem from './components/item';\nimport DropdownDivider from './components/divider';\nimport Button from '../button';\n\nimport Element from '../element';\n\nconst colors = [null].concat(Object.values(CONSTANTS.COLORS));\n\nconst Dropdown = ({\n  className,\n  children,\n  value,\n  color,\n  align,\n  right,\n  up,\n  hoverable,\n  label,\n  onChange,\n  closeOnSelect,\n  icon,\n  domRef,\n  ...props\n}) => {\n  const ref = useRef(domRef);\n  const [isOpen, setIsOpen] = useState(false);\n  const close = (evt) => {\n    // IDK yet how to test using the ref in enzime\n    // istanbul ignore if\n    if (\n      hoverable ||\n      (evt && ref && ref.current && ref.current.contains(evt.target))\n    ) {\n      return;\n    }\n    if (ref.current) {\n      setIsOpen(false);\n    }\n  };\n\n  const onSelect = (selectedValue) => () => {\n    if (onChange) {\n      onChange(selectedValue);\n    }\n    if (closeOnSelect) {\n      close();\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('click', close);\n    return () => {\n      window.removeEventListener('click', close);\n    };\n  }, []);\n\n  let current = label;\n\n  const childrenArray = React.Children.map(children, (child, i) => {\n    if (\n      child.type === DropdownItem &&\n      ((i === 0 && !label) || child.props.value === value)\n    ) {\n      current = child.props.children;\n    }\n    return React.cloneElement(\n      child,\n      child.type === DropdownItem\n        ? {\n            active: child.props.value === value,\n            onClick: onSelect(child.props.value),\n          }\n        : {},\n    );\n  });\n\n  return (\n    <Element\n      {...props}\n      domRef={ref}\n      className={classnames('dropdown', className, {\n        'is-active': isOpen,\n        'is-up': up,\n        'is-right': right || align === 'right',\n        'is-hoverable': hoverable,\n      })}\n    >\n      <div\n        className=\"dropdown-trigger\"\n        role=\"presentation\"\n        onClick={() => setIsOpen((o) => !o)}\n      >\n        <Button color={color}>\n          <span>{current}</span>\n          {icon}\n        </Button>\n      </div>\n      <div className=\"dropdown-menu\" id=\"dropdown-menu\" role=\"menu\">\n        <div className=\"dropdown-content\">{childrenArray}</div>\n      </div>\n    </Element>\n  );\n};\n\nDropdown.Item = DropdownItem;\n\nDropdown.Divider = DropdownDivider;\n\nDropdown.propTypes = {\n  ...Element.propTypes,\n  /**\n   * The value of the currently selected dropdown item. If this value match\n   * with the value passed to a Dropdown.item it will be used as label if the label prop its empty\n   */\n  value: PropTypes.any,\n  /**\n   * Called when a dropdown item is selected.\n   */\n  onChange: PropTypes.func,\n  /**\n   * The color of the dropdown button.\n   */\n  color: PropTypes.oneOf(colors),\n  /**\n   * Whether the dropdown should align to the right side.\n   */\n  right: PropTypes.bool,\n  /**\n   * Whether the dropdown menu should appear above the dropdown button\n   * instead of below.\n   */\n  up: PropTypes.bool,\n  /**\n   * Whether the dropdown menu can be activated when the cursor\n   * hovers above the button without clicking.\n   */\n  hoverable: PropTypes.bool,\n  /**\n   * A string, or a react component that displays the label of the dropdown\n   * button. if not set it will be use the selected Dropdown.Item or the first one\n   * if there is no selected\n   */\n  label: PropTypes.node,\n  /**\n   * Whether the dropdown menu should be closed when a dropdown item is selected.\n   */\n  closeOnSelect: PropTypes.bool,\n  /**\n   * A react component that draws the icon of the dropdown button.\n   * Usually it is an arrow (or a chevron) pointing downwards (or upwards).\n   */\n  icon: PropTypes.node,\n  /**\n   * Additional CSS classes to pass to `<Dropdown />`.\n   * They will sit alongside pre-applied bulma classes.\n   */\n};\n\nDropdown.defaultProps = {\n  closeOnSelect: true,\n};\n\nexport default Dropdown;\n"],"file":"dropdown.js"}