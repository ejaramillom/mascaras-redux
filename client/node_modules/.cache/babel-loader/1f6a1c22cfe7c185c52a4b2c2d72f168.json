{"ast":null,"code":"var _jsxFileName = \"/home/leon/Documentos/proyectos/react/mascaras/client/src/components/Filter.component.js\";\nimport React, { useState, useEffect } from 'react';\nimport '../App.css';\nimport Button from 'react-bulma-components/lib/components/button';\nimport Section from 'react-bulma-components/lib/components/section';\nimport Container from 'react-bulma-components/lib/components/container';\nimport Tile from 'react-bulma-components/lib/components/tile';\nimport Heading from 'react-bulma-components/lib/components/heading';\nimport { BottleModal, BrushModal, RodModal } from './OpenModal.component';\nimport { ThreadCompatibility, BrushRodCompatibility, BrushWiperCompatibility, GapCompatibility } from './Compatibility.component';\nimport axios from \"axios\"; //---------------- Bottle modal\n\nexport const BottleFilter = props => {\n  const [bottles, setBottles] = useState([]);\n  const rod = props.rod;\n  useEffect(() => {\n    const fetchData = async () => {\n      const {\n        data\n      } = await axios.get(\"/bottle\").catch(function (error) {\n        console.log(error);\n      });\n      setBottles(data);\n    };\n\n    fetchData();\n  }, []);\n\n  const addBottle = async data => {\n    await axios.post(\"/bottle\", {\n      name: data.name,\n      drawing: data.drawing,\n      mold: data.mold,\n      depth: data.depth,\n      thread: data.thread\n    }).then(function (response) {\n      if (response.status === 200) {\n        alert(\"Bottle added to the list!\");\n        console.log(\"Succesfully added\");\n      } else {\n        const err = new Error(response.error);\n        console.log(err);\n        throw err;\n      }\n    }).catch(function (error) {\n      alert(error);\n    });\n  };\n\n  if (rod && rod.thread) {\n    const filteredBottles = bottles.filter(element => {\n      return element.thread.toLowerCase().indexOf(rod.thread.toLowerCase()) !== -1;\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(OpenModal, {\n      modal: {\n        closeOnBlur: false\n      },\n      name: \"Bottle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }\n    }, filteredBottles.map(element => /*#__PURE__*/React.createElement(Modal.Content, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Section, {\n      style: {\n        backgroundColor: \"white\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 21\n      }\n    }, element.name), /*#__PURE__*/React.createElement(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 21\n      }\n    }, element.drawing), \" \", /*#__PURE__*/React.createElement(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 54\n      }\n    }, element.mold), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      color: \"info\",\n      onClick: () => {\n        addBottle(element);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 19\n      }\n    }, \"Add Bottle\")))))));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(OpenModal, {\n    modal: {\n      closeOnBlur: false\n    },\n    name: \"Bottle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }, bottles.map(element => /*#__PURE__*/React.createElement(Modal.Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Section, {\n    style: {\n      backgroundColor: \"white\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 19\n    }\n  }, element.name), /*#__PURE__*/React.createElement(\"small\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 19\n    }\n  }, element.drawing), \" \", /*#__PURE__*/React.createElement(\"small\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 52\n    }\n  }, element.mold), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    color: \"info\",\n    onClick: () => {\n      addBottle(element);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }\n  }, \"Add Bottle\")))))));\n}; //---------------- Bottle modal\n\nconst Filter = () => {\n  //---------------- hooks\n  const [thread, setThread] = useState(false);\n  const [rodBrush, setRodBrush] = useState(false);\n  const [brushWiper, setBrushWiper] = useState(false);\n  const [gap, setGap] = useState(false);\n  const [build, setFilter] = useState([]);\n  const [bottles, setBottles] = useState([]);\n  const [bottle, setBottle] = useState([]);\n  const [rod, setRod] = useState([]);\n  const [brush, setBrush] = useState([]);\n  const [modalClick, setModalClick] = useState(false); //---------------- hooks end\n  //---------------- useEffect\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const {\n        data\n      } = await axios.get(\"/build\").catch(function (error) {\n        console.log(error);\n      });\n      setFilter(data);\n\n      if (data[0] && data[0].bottle) {\n        setBottle(data[0].bottle);\n      } else {\n        setBottle([]);\n      }\n\n      if (data[0] && data[0].rod) {\n        setRod(data[0].rod);\n      } else {\n        setRod([]);\n      }\n\n      if (data[0] && data[0].brush) {\n        setBrush(data[0].brush);\n      } else {\n        setBrush([]);\n      }\n    };\n\n    fetchData();\n\n    if (!build[0]) {\n      setThread(false);\n      setGap(false);\n      setBrushWiper(false);\n      setRodBrush(false);\n    } //------thread check\n\n\n    if (build[0] && bottle && rod) {\n      if (bottle.thread === rod.thread) {\n        setThread(true);\n      }\n    } else {\n      setThread(false);\n    } //------thread check\n    //------rod and brush check\n\n\n    if (build[0] && brush.type && rod.name) {\n      let brushRodDiff = Number(rod.dimensions.brushDiameter) - Number(brush.shaftDiameter);\n\n      if (brush.type === \"INYECTADO\") {\n        if (brushRodDiff > 0.05 && brushRodDiff < 0.15) {\n          setRodBrush(true);\n        } else {\n          setRodBrush(false);\n        }\n      }\n\n      if (brush.type === \"NYLON\") {\n        if (brushRodDiff > -0.05 && brushRodDiff < 0.1) {\n          setRodBrush(true);\n        } else {\n          setRodBrush(false);\n        }\n      }\n\n      if (brush.type === \"LIP GLOSS\") {\n        if (brushRodDiff > 0 && brushRodDiff < 0.2) {\n          setRodBrush(true);\n        } else {\n          setRodBrush(false);\n        }\n      }\n\n      if (brush.type === \"DELINEADOR\") {\n        if (brushRodDiff > -0.05 && brushRodDiff < 0.1) {\n          setRodBrush(true);\n        } else {\n          setRodBrush(false);\n        }\n      }\n    } //------rod and brush check\n    //------wiper and brush check\n\n\n    if (build[0] && brush.type && rod.name) {\n      let brushWiperDiff = Number(brush.brushDiameter) - Number(rod.dimensions.rodDiameter);\n\n      if (brush.type === \"INYECTADO\") {\n        if (brushWiperDiff > 0.5 && brushWiperDiff < 4.8) {\n          setBrushWiper(true);\n        } else {\n          setBrushWiper(false);\n        }\n      }\n\n      if (brush.type === \"NYLON\") {\n        if (brushWiperDiff > 0.8 && brushWiperDiff < 6.4) {\n          setBrushWiper(true);\n        } else {\n          setBrushWiper(false);\n        }\n      }\n\n      if (brush.type === \"LIP GLOSS\") {\n        if (brushWiperDiff > -3 && brushWiperDiff < 2) {\n          setBrushWiper(true);\n        } else {\n          setBrushWiper(false);\n        }\n      }\n\n      if (brush.type === \"DELINEADOR\") {\n        if (brushWiperDiff > 1 && brushWiperDiff < 2) {\n          setBrushWiper(true);\n        } else {\n          setBrushWiper(false);\n        }\n      }\n    } //------wiper and brush check\n    //------gap check\n\n\n    if (build[0] && brush.type && rod.name && bottle.name) {\n      let mascaraGap = Number(bottle.depth) - (Number(brush.brushLength) + Number(rod.dimensions.length));\n\n      if (brush.type === \"INYECTADO\") {\n        if (mascaraGap > 2 && mascaraGap < 6) {\n          setGap(true);\n        } else {\n          setGap(false);\n        }\n      }\n\n      if (brush.type === \"NYLON\") {\n        if (mascaraGap > 1 && mascaraGap < 5) {\n          setGap(true);\n        } else {\n          setGap(false);\n        }\n      }\n\n      if (brush.type === \"LIP GLOSS\") {\n        if (mascaraGap > 1 && mascaraGap < 6) {\n          setGap(true);\n        } else {\n          setGap(false);\n        }\n      }\n\n      if (brush.type === \"DELINEADOR\") {\n        if (mascaraGap > 1 && mascaraGap < 5) {\n          setGap(true);\n        } else {\n          setGap(false);\n        }\n      }\n    } //------gap check\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [modalClick]); //---------------- useEffect\n  //---------------- middlewares that must be moved and imported\n\n  const deleteFilter = async () => {\n    await axios.post(\"/delete\").then(function (response) {\n      if (response.status === 200) {\n        console.log(\"Succesfully deleted\");\n        setThread(false);\n        setGap(false);\n        setBrushWiper(false);\n        setRodBrush(false);\n        alert(\"Filter deleted!\");\n      } else {\n        const err = new Error(response.error);\n        console.log(err);\n        throw err;\n      }\n    }).catch(function (error) {\n      alert(error);\n    });\n  };\n\n  const verifyThread = () => {\n    if (build[0] && bottle.name && rod.name) {\n      if (bottle.thread === rod.thread) {\n        setThread(true);\n      } else {\n        alert(\"Threads are different\");\n        setThread(false);\n      }\n    } else {\n      alert(\"There is missing data on the mascara\");\n    }\n  };\n\n  const verifyRodBrush = () => {\n    if (build[0] && brush.type && rod.name) {\n      let brushRodDiff = Number(rod.dimensions.brushDiameter) - Number(brush.shaftDiameter);\n\n      if (brush.type === \"INYECTADO\") {\n        if (brushRodDiff > 0.05 && brushRodDiff < 0.15) {\n          setRodBrush(true);\n        } else {\n          alert(\"Difference is lower than 0.05mm or bigger than 0.15mm\");\n        }\n      }\n\n      if (brush.type === \"NYLON\") {\n        if (brushRodDiff > -0.05 && brushRodDiff < 0.1) {\n          setRodBrush(true);\n        } else {\n          alert(\"Difference is lower than -0.05mm or bigger than 0.1mm\");\n        }\n      }\n\n      if (brush.type === \"LIP GLOSS\") {\n        if (brushRodDiff > 0 && brushRodDiff < 0.2) {\n          setRodBrush(true);\n        } else {\n          alert(\"Difference is lower than 0mm or bigger than 0.2mm\");\n        }\n      }\n\n      if (brush.type === \"DELINEADOR\") {\n        if (brushRodDiff > -0.05 && brushRodDiff < 0.1) {\n          setRodBrush(true);\n        } else {\n          alert(\"Difference is lower than -0.05mm or bigger than 0.1mm\");\n        }\n      }\n    } else {\n      alert(\"There is missing data on the mascara\");\n    }\n  };\n\n  const verifyBrushWiper = () => {\n    if (build[0] && brush.type && rod.name) {\n      let brushWiperDiff = Number(brush.brushDiameter) - Number(rod.dimensions.rodDiameter);\n\n      if (brush.type === \"INYECTADO\") {\n        if (brushWiperDiff > 0.5 && brushWiperDiff < 4.8) {\n          setBrushWiper(true);\n        } else {\n          alert(\"Difference is lower than 0.5mm or bigger than 4.8mm\");\n        }\n      }\n\n      if (brush.type === \"NYLON\") {\n        if (brushWiperDiff > 0.8 && brushWiperDiff < 6.4) {\n          setBrushWiper(true);\n        } else {\n          alert(\"Difference is lower than 0.8mm or bigger than 6.4mm\");\n        }\n      }\n\n      if (brush.type === \"LIP GLOSS\") {\n        if (brushWiperDiff > -3 && brushWiperDiff < 2) {\n          setBrushWiper(true);\n        } else {\n          alert(\"Difference is lower than -3mm or bigger than 2mm\");\n        }\n      }\n\n      if (brush.type === \"DELINEADOR\") {\n        if (brushWiperDiff > 1 && brushWiperDiff < 2) {\n          setBrushWiper(true);\n        } else {\n          alert(\"Difference is lower than 1mm or bigger than 2mm\");\n        }\n      }\n    } else {\n      alert(\"There is missing build on the mascara\");\n    }\n  };\n\n  const verifyGap = () => {\n    if (build[0] && bottle.name && rod.name) {\n      if (bottle.thread === rod.thread) {\n        setGap(true);\n      } else {\n        setGap(false);\n      }\n    } else {\n      alert(\"There is missing data on the mascara\");\n    }\n  };\n\n  const reset = () => {\n    setThread(false);\n    setGap(false);\n    setBrushWiper(false);\n    setRodBrush(false);\n  }; //---------------- middlewares that must be moved and imported end\n  //---------------- rendering of the component\n\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App-build\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Tile, {\n    kind: \"ancestor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Tile, {\n    kind: \"parent\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Tile, {\n    renderAs: \"article\",\n    kind: \"child\",\n    notification: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Section, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"bd-notification\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Heading, {\n    size: 6,\n    renderAs: \"p\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 433,\n      columnNumber: 19\n    }\n  }, \"Thread\"), /*#__PURE__*/React.createElement(Heading, {\n    size: 7,\n    subtitle: true,\n    renderAs: \"p\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 434,\n      columnNumber: 19\n    }\n  }, \"The thread in the rod and the bottle are compatible\"))))), /*#__PURE__*/React.createElement(Tile, {\n    renderAs: \"article\",\n    kind: \"child\",\n    notification: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(BrushRodCompatibility, {\n    rodBrush: rodBrush,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 440,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Tile, {\n    renderAs: \"article\",\n    kind: \"child\",\n    notification: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(BrushWiperCompatibility, {\n    brushWiper: brushWiper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 444,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Tile, {\n    renderAs: \"article\",\n    kind: \"child\",\n    notification: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 447,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(GapCompatibility, {\n    gap: gap,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 448,\n      columnNumber: 13\n    }\n  })))));\n}; //------here ends rendering of the component\n\n\nexport default Filter;","map":{"version":3,"sources":["/home/leon/Documentos/proyectos/react/mascaras/client/src/components/Filter.component.js"],"names":["React","useState","useEffect","Button","Section","Container","Tile","Heading","BottleModal","BrushModal","RodModal","ThreadCompatibility","BrushRodCompatibility","BrushWiperCompatibility","GapCompatibility","axios","BottleFilter","props","bottles","setBottles","rod","fetchData","data","get","catch","error","console","log","addBottle","post","name","drawing","mold","depth","thread","then","response","status","alert","err","Error","filteredBottles","filter","element","toLowerCase","indexOf","closeOnBlur","map","backgroundColor","Filter","setThread","rodBrush","setRodBrush","brushWiper","setBrushWiper","gap","setGap","build","setFilter","bottle","setBottle","setRod","brush","setBrush","modalClick","setModalClick","type","brushRodDiff","Number","dimensions","brushDiameter","shaftDiameter","brushWiperDiff","rodDiameter","mascaraGap","brushLength","length","deleteFilter","verifyThread","verifyRodBrush","verifyBrushWiper","verifyGap","reset"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport '../App.css';\nimport Button from 'react-bulma-components/lib/components/button';\nimport Section from 'react-bulma-components/lib/components/section';\nimport Container from 'react-bulma-components/lib/components/container';\nimport Tile from 'react-bulma-components/lib/components/tile';\nimport Heading from 'react-bulma-components/lib/components/heading';\nimport {\n  BottleModal,\n  BrushModal,\n  RodModal,\n} from './OpenModal.component';\nimport {\n  ThreadCompatibility,\n  BrushRodCompatibility,\n  BrushWiperCompatibility,\n  GapCompatibility,\n} from './Compatibility.component';\nimport axios from \"axios\";\n\n//---------------- Bottle modal\n\nexport const BottleFilter = (props) => {\n  const [bottles, setBottles] = useState([]);\n  const rod = props.rod;\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const {data} = await axios.get(\"/bottle\")\n      .catch(function (error) {\n        console.log(error)\n      });\n      setBottles(data);\n    }\n    fetchData();\n  }, []);\n\n  const addBottle = async (data) => {\n    await axios.post(\"/bottle\", {\n      name: data.name,\n      drawing: data.drawing,\n      mold: data.mold,\n      depth: data.depth,\n      thread: data.thread\n    })\n    .then(function (response) {\n      if (response.status === 200) {\n        alert(\"Bottle added to the list!\");\n        console.log(\"Succesfully added\");\n      } else {\n        const err = new Error(response.error);\n        console.log(err);\n        throw err;\n      }\n    })\n    .catch(function (error) {\n      alert(error);\n    });\n  };\n\n  if (rod && rod.thread){\n    const filteredBottles = bottles.filter( element => {\n      return element.thread.toLowerCase().indexOf(rod.thread.toLowerCase()) !== -1;\n    });\n\n    return (\n      <div>\n        <OpenModal modal={{ closeOnBlur: false }} name=\"Bottle\">\n          <div className=\"modal-body\">\n            {filteredBottles.map((element) => (\n              <Modal.Content>\n                <Section style={{ backgroundColor: \"white\" }}>\n                  <p>\n                    <strong>{element.name}</strong>\n                    <small>{element.drawing}</small> <small>{element.mold}</small>\n                    <br />\n                  </p>\n                  <Button\n                    type=\"submit\"\n                    color=\"info\"\n                    onClick={() => {\n                      addBottle(element);\n                    }}\n                  >\n                    Add Bottle\n                  </Button>\n                </Section>\n              </Modal.Content>\n            ))}\n          </div>\n        </OpenModal>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      <OpenModal modal={{ closeOnBlur: false }} name=\"Bottle\">\n        <div className=\"modal-body\">\n          {bottles.map((element) => (\n            <Modal.Content>\n              <Section style={{ backgroundColor: \"white\" }}>\n                <p>\n                  <strong>{element.name}</strong>\n                  <small>{element.drawing}</small> <small>{element.mold}</small>\n                  <br />\n                </p>\n                <Button\n                  type=\"submit\"\n                  color=\"info\"\n                  onClick={() => {\n                    addBottle(element);\n                  }}\n                >\n                  Add Bottle\n                </Button>\n              </Section>\n            </Modal.Content>\n          ))}\n        </div>\n      </OpenModal>\n    </div>\n  );\n};\n\n//---------------- Bottle modal\n\nconst Filter = () => {\n\n//---------------- hooks\n\n  const [thread, setThread] = useState(false);\n  const [rodBrush, setRodBrush] = useState(false);\n  const [brushWiper, setBrushWiper] = useState(false);\n  const [gap, setGap] = useState(false);\n  const [build, setFilter] = useState([]);\n  const [bottles, setBottles] = useState([]);\n  const [bottle, setBottle] = useState([]);\n  const [rod, setRod] = useState([]);\n  const [brush, setBrush] = useState([]);\n  const [modalClick, setModalClick] = useState(false);\n\n//---------------- hooks end\n\n//---------------- useEffect\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const {data} = await axios.get(\"/build\")\n      .catch(function (error) {\n        console.log(error)\n      });\n      setFilter(data);\n      if (data[0] && data[0].bottle) {\n        setBottle(data[0].bottle);\n      } else {\n        setBottle([])\n      }\n      if (data[0] && data[0].rod) {\n        setRod(data[0].rod);\n      } else {\n        setRod([])\n      }\n      if (data[0] && data[0].brush) {\n        setBrush(data[0].brush);\n      } else {\n        setBrush([])\n      }\n    }\n    fetchData();\n\n    if (!build[0]) {\n      setThread(false);\n      setGap(false);\n      setBrushWiper(false);\n      setRodBrush(false);\n    }\n\n    //------thread check\n    if (build[0] && bottle && rod) {\n      if (bottle.thread === rod.thread) {\n        setThread(true);\n      }\n    } else {\n      setThread(false);\n    }\n    //------thread check\n\n    //------rod and brush check\n    if (build[0] && brush.type && rod.name) {\n      let brushRodDiff =  Number(rod.dimensions.brushDiameter) - Number(brush.shaftDiameter);\n      if (brush.type === \"INYECTADO\") {\n        if (brushRodDiff > 0.05 && brushRodDiff < 0.15){\n          setRodBrush(true);\n        } else {\n          setRodBrush(false);\n        }\n      }\n      if (brush.type === \"NYLON\") {\n        if (brushRodDiff > -0.05 && brushRodDiff < 0.1){\n          setRodBrush(true);\n        } else {\n          setRodBrush(false);\n        }\n      }\n      if (brush.type === \"LIP GLOSS\") {\n        if (brushRodDiff > 0 && brushRodDiff < 0.2){\n          setRodBrush(true);\n        } else {\n          setRodBrush(false);\n        }\n      }\n      if (brush.type === \"DELINEADOR\") {\n        if (brushRodDiff > -0.05 && brushRodDiff < 0.1){\n          setRodBrush(true);\n        } else {\n          setRodBrush(false);\n        }\n      }\n    }\n    //------rod and brush check\n\n    //------wiper and brush check\n    if (build[0] && brush.type && rod.name) {\n      let brushWiperDiff =  Number(brush.brushDiameter) - Number(rod.dimensions.rodDiameter) ;\n      if (brush.type === \"INYECTADO\") {\n        if (brushWiperDiff > 0.5 && brushWiperDiff < 4.8){\n          setBrushWiper(true);\n        } else {\n          setBrushWiper(false);\n        }\n      }\n      if (brush.type === \"NYLON\") {\n        if (brushWiperDiff > 0.8 && brushWiperDiff < 6.4){\n          setBrushWiper(true);\n        } else {\n          setBrushWiper(false);\n        }\n      }\n      if (brush.type === \"LIP GLOSS\") {\n        if (brushWiperDiff > -3 && brushWiperDiff < 2){\n          setBrushWiper(true);\n        } else {\n          setBrushWiper(false);\n        }\n      }\n      if (brush.type === \"DELINEADOR\") {\n        if (brushWiperDiff > 1 && brushWiperDiff < 2){\n          setBrushWiper(true);\n        } else {\n          setBrushWiper(false);\n        }\n      }\n    }\n    //------wiper and brush check\n    //------gap check\n    if (build[0] && brush.type && rod.name && bottle.name) {\n      let mascaraGap =  Number(bottle.depth) - (Number(brush.brushLength) + Number(rod.dimensions.length));\n      if (brush.type === \"INYECTADO\") {\n        if (mascaraGap > 2 && mascaraGap < 6){\n          setGap(true);\n        } else {\n          setGap(false);\n        }\n      }\n      if (brush.type === \"NYLON\") {\n        if (mascaraGap > 1 && mascaraGap < 5){\n          setGap(true);\n        } else {\n          setGap(false);\n        }\n      }\n      if (brush.type === \"LIP GLOSS\") {\n        if (mascaraGap > 1 && mascaraGap < 6){\n          setGap(true);\n        } else {\n          setGap(false);\n        }\n      }\n      if (brush.type === \"DELINEADOR\") {\n        if (mascaraGap > 1 && mascaraGap < 5){\n          setGap(true);\n        } else {\n          setGap(false);\n        }\n      }\n    }\n  //------gap check\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [modalClick]);\n\n//---------------- useEffect\n\n//---------------- middlewares that must be moved and imported\n\n  const deleteFilter = async () => {\n    await axios.post(\"/delete\")\n    .then(function (response) {\n      if (response.status === 200) {\n        console.log(\"Succesfully deleted\");\n        setThread(false);\n        setGap(false);\n        setBrushWiper(false);\n        setRodBrush(false);\n        alert(\"Filter deleted!\");\n      } else {\n        const err = new Error(response.error);\n        console.log(err);\n        throw err;\n      }\n    })\n    .catch(function (error) {\n      alert(error);\n    });\n  };\n\n  const verifyThread = () => {\n    if (build[0] && bottle.name && rod.name) {\n      if (bottle.thread === rod.thread) {\n        setThread(true);\n      } else {\n        alert(\"Threads are different\")\n        setThread(false);\n      }\n    } else {\n      alert(\"There is missing data on the mascara\")\n    }\n  };\n\n  const verifyRodBrush = () => {\n    if (build[0] && brush.type && rod.name) {\n      let brushRodDiff =  Number(rod.dimensions.brushDiameter) - Number(brush.shaftDiameter);\n      if (brush.type === \"INYECTADO\") {\n        if (brushRodDiff > 0.05 && brushRodDiff < 0.15){\n          setRodBrush(true);\n        } else {\n          alert(\"Difference is lower than 0.05mm or bigger than 0.15mm\")\n        }\n      }\n      if (brush.type === \"NYLON\") {\n        if (brushRodDiff > -0.05 && brushRodDiff < 0.1){\n          setRodBrush(true);\n        } else {\n          alert(\"Difference is lower than -0.05mm or bigger than 0.1mm\")\n        }\n      }\n      if (brush.type === \"LIP GLOSS\") {\n        if (brushRodDiff > 0 && brushRodDiff < 0.2){\n          setRodBrush(true);\n        } else {\n          alert(\"Difference is lower than 0mm or bigger than 0.2mm\")\n        }\n      }\n      if (brush.type === \"DELINEADOR\") {\n        if (brushRodDiff > -0.05 && brushRodDiff < 0.1){\n          setRodBrush(true);\n        } else {\n          alert(\"Difference is lower than -0.05mm or bigger than 0.1mm\")\n        }\n      }\n    } else {\n      alert(\"There is missing data on the mascara\")\n    }\n  };\n\n  const verifyBrushWiper = () => {\n    if (build[0] && brush.type && rod.name) {\n      let brushWiperDiff =  Number(brush.brushDiameter) - Number(rod.dimensions.rodDiameter) ;\n      if (brush.type === \"INYECTADO\") {\n        if (brushWiperDiff > 0.5 && brushWiperDiff < 4.8){\n          setBrushWiper(true);\n        } else {\n          alert(\"Difference is lower than 0.5mm or bigger than 4.8mm\")\n        }\n      }\n      if (brush.type === \"NYLON\") {\n        if (brushWiperDiff > 0.8 && brushWiperDiff < 6.4){\n          setBrushWiper(true);\n        } else {\n          alert(\"Difference is lower than 0.8mm or bigger than 6.4mm\")\n        }\n      }\n      if (brush.type === \"LIP GLOSS\") {\n        if (brushWiperDiff > -3 && brushWiperDiff < 2){\n          setBrushWiper(true);\n        } else {\n          alert(\"Difference is lower than -3mm or bigger than 2mm\")\n        }\n      }\n      if (brush.type === \"DELINEADOR\") {\n        if (brushWiperDiff > 1 && brushWiperDiff < 2){\n          setBrushWiper(true);\n        } else {\n          alert(\"Difference is lower than 1mm or bigger than 2mm\")\n        }\n      }\n    } else {\n      alert(\"There is missing build on the mascara\")\n    }\n  };\n\n  const verifyGap = () => {\n    if (build[0] && bottle.name && rod.name) {\n      if (bottle.thread === rod.thread) {\n        setGap(true);\n      } else {\n        setGap(false);\n      }\n    } else {\n      alert(\"There is missing data on the mascara\")\n    }\n  };\n\n  const reset = () => {\n    setThread(false);\n    setGap(false);\n    setBrushWiper(false);\n    setRodBrush(false);\n  };\n\n//---------------- middlewares that must be moved and imported end\n\n//---------------- rendering of the component\n  return (\n    <div className=\"App-build\">\n      <Tile kind=\"ancestor\">\n        <Tile kind=\"parent\">\n          <Tile renderAs=\"article\" kind=\"child\" notification>\n          {}\n            <Section>\n              <Container>\n                <p className=\"bd-notification\">\n                  <Heading size={6} renderAs=\"p\">Thread</Heading>\n                  <Heading size={7} subtitle renderAs=\"p\">The thread in the rod and the bottle are compatible</Heading>\n                </p>\n              </Container>\n            </Section>\n          </Tile>\n          <Tile renderAs=\"article\" kind=\"child\" notification >\n            <BrushRodCompatibility rodBrush={rodBrush}>\n            </BrushRodCompatibility>\n          </Tile>\n          <Tile renderAs=\"article\" kind=\"child\" notification >\n            <BrushWiperCompatibility brushWiper={brushWiper}>\n            </BrushWiperCompatibility>\n          </Tile>\n          <Tile renderAs=\"article\" kind=\"child\" notification >\n            <GapCompatibility gap={gap}>\n            </GapCompatibility>\n          </Tile>\n        </Tile>\n      </Tile>\n\n      {/* verifying assembly tiles*/}\n\n      {/* Delete and reset*/}\n    </div>\n  );\n}\n\n//------here ends rendering of the component\n\nexport default Filter;\n"]},"metadata":{},"sourceType":"module"}