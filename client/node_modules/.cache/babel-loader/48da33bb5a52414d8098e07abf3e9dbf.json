{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/home/leon/Documentos/proyectos/react/mascaras/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.StoryRenderer = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactDom = _interopRequireDefault(require(\"react-dom\"));\n\nvar _global = require(\"global\");\n\nvar _ansiToHtml = _interopRequireDefault(require(\"ansi-to-html\"));\n\nvar _coreEvents = _interopRequireDefault(require(\"@storybook/core-events\"));\n\nvar _clientLogger = require(\"@storybook/client-logger\");\n\nvar _NoDocs = require(\"./NoDocs\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nvar layouts = {\n  centered: {\n    margin: 0,\n    padding: '1rem',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    minHeight: '100vh',\n    boxSizing: 'border-box'\n  },\n  fullscreen: {\n    margin: 0,\n    padding: 0,\n    display: 'block',\n    justifyContent: 'initial',\n    alignItems: 'initial',\n    minHeight: 'initial'\n  },\n  padded: {\n    margin: 0,\n    padding: '1rem',\n    display: 'block',\n    justifyContent: 'initial',\n    alignItems: 'initial',\n    minHeight: 'initial'\n  }\n};\nvar classes = {\n  MAIN: 'sb-show-main',\n  NOPREVIEW: 'sb-show-nopreview',\n  ERROR: 'sb-show-errordisplay'\n};\nvar ansiConverter = new _ansiToHtml[\"default\"]({\n  escapeXML: true\n});\n/**\n * StoryRenderer is responsible for rendering the correct story to the screen\n *\n * It is very much concerned with drawing to the screen and will do things like change classes\n * on the body etc.\n */\n\nvar StoryRenderer = /*#__PURE__*/function () {\n  function StoryRenderer(_ref) {\n    var render = _ref.render,\n        channel = _ref.channel,\n        storyStore = _ref.storyStore;\n\n    _classCallCheck(this, StoryRenderer);\n\n    this.render = void 0;\n    this.channel = void 0;\n    this.storyStore = void 0;\n    this.previousMetadata = void 0;\n    this.previousStyles = void 0;\n    this.render = render;\n    this.channel = channel;\n    this.storyStore = storyStore;\n    this.setupListeners();\n  }\n\n  _createClass(StoryRenderer, [{\n    key: \"setupListeners\",\n    value: function setupListeners() {\n      var _this = this; // Channel can be null in StoryShots\n\n\n      if (this.channel) {\n        this.channel.on(_coreEvents[\"default\"].CURRENT_STORY_WAS_SET, function () {\n          return _this.renderCurrentStory(false);\n        });\n        this.channel.on(_coreEvents[\"default\"].STORY_ARGS_UPDATED, function () {\n          return _this.forceReRender();\n        });\n        this.channel.on(_coreEvents[\"default\"].GLOBALS_UPDATED, function () {\n          return _this.forceReRender();\n        });\n        this.channel.on(_coreEvents[\"default\"].FORCE_RE_RENDER, function () {\n          return _this.forceReRender();\n        });\n      }\n    }\n  }, {\n    key: \"forceReRender\",\n    value: function forceReRender() {\n      this.renderCurrentStory(true);\n    }\n  }, {\n    key: \"renderCurrentStory\",\n    value: function renderCurrentStory(forceRender) {\n      var _this2 = this;\n\n      var storyStore = this.storyStore;\n      var loadError = storyStore.getError();\n\n      if (loadError) {\n        this.showErrorDisplay(loadError);\n        return;\n      }\n\n      var _ref2 = storyStore.getSelection() || {},\n          storyId = _ref2.storyId,\n          urlViewMode = _ref2.viewMode;\n\n      var data = storyStore.fromId(storyId);\n\n      var _ref3 = data || {},\n          kind = _ref3.kind,\n          id = _ref3.id,\n          _ref3$parameters = _ref3.parameters,\n          parameters = _ref3$parameters === void 0 ? {} : _ref3$parameters,\n          getDecorated = _ref3.getDecorated;\n\n      var docsOnly = parameters.docsOnly,\n          layout = parameters.layout;\n      var metadata = {\n        id: id,\n        kind: kind,\n        viewMode: docsOnly ? 'docs' : urlViewMode,\n        getDecorated: getDecorated\n      };\n      this.applyLayout(metadata.viewMode === 'docs' ? 'fullscreen' : layout);\n      var context = Object.assign(Object.assign({\n        id: storyId\n      }, data), {}, {\n        forceRender: forceRender,\n        showMain: function showMain() {\n          return _this2.showMain();\n        },\n        showError: function showError(_ref4) {\n          var title = _ref4.title,\n              description = _ref4.description;\n          return _this2.renderError({\n            title: title,\n            description: description\n          });\n        },\n        showException: function showException(err) {\n          return _this2.renderException(err);\n        }\n      });\n      this.renderStoryIfChanged({\n        metadata: metadata,\n        context: context\n      });\n    }\n  }, {\n    key: \"renderStoryIfChanged\",\n    value: function renderStoryIfChanged(_ref5) {\n      var metadata = _ref5.metadata,\n          context = _ref5.context;\n      var forceRender = context.forceRender,\n          name = context.name;\n      var previousMetadata = this.previousMetadata,\n          storyStore = this.storyStore;\n      var storyChanged = !previousMetadata || previousMetadata.id !== metadata.id; // getDecorated is a function that returns a decorated story function. It'll change whenever the story\n      // is reloaded into the store, which means the module the story was defined in was HMR-ed.\n\n      var implementationChanged = !previousMetadata || previousMetadata.getDecorated !== metadata.getDecorated;\n      var viewModeChanged = !previousMetadata || previousMetadata.viewMode !== metadata.viewMode;\n      var kindChanged = !previousMetadata || previousMetadata.kind !== metadata.kind; // Don't re-render the story if nothing has changed to justify it\n\n      if (!forceRender && !storyChanged && !implementationChanged && !viewModeChanged) {\n        this.channel.emit(_coreEvents[\"default\"].STORY_UNCHANGED, Object.assign(Object.assign({}, metadata), {}, {\n          name: name\n        }));\n        return;\n      } // If we are rendering something new (as opposed to re-rendering the same or first story), emit\n\n\n      if (previousMetadata && (storyChanged || kindChanged || viewModeChanged)) {\n        this.channel.emit(_coreEvents[\"default\"].STORY_CHANGED, metadata.id);\n      }\n\n      switch (previousMetadata ? previousMetadata.viewMode : 'story') {\n        case 'docs':\n          if (kindChanged || viewModeChanged) {\n            this.storyStore.cleanHooksForKind(previousMetadata.kind);\n\n            _reactDom[\"default\"].unmountComponentAtNode(_global.document.getElementById('docs-root'));\n          }\n\n          break;\n\n        case 'story':\n        default:\n          if (previousMetadata && (storyChanged || viewModeChanged)) {\n            this.storyStore.cleanHooks(previousMetadata.id);\n\n            _reactDom[\"default\"].unmountComponentAtNode(_global.document.getElementById('root'));\n          }\n\n      } // Docs view renders into a different root ID to avoid conflicts\n      // with the user's view layer. Therefore we need to clean up whenever\n      // we transition between view modes\n\n\n      if (viewModeChanged) {\n        switch (metadata.viewMode) {\n          case 'docs':\n            {\n              this.showMain();\n              this.showDocs();\n              break;\n            }\n\n          case 'story':\n          default:\n            {\n              if (previousMetadata) {\n                this.showStory();\n              }\n            }\n        }\n      } // Given a cleaned up state, render the appropriate view mode\n\n\n      switch (metadata.viewMode) {\n        case 'docs':\n          {\n            this.renderDocs({\n              context: context,\n              storyStore: storyStore\n            });\n            break;\n          }\n\n        case 'story':\n        default:\n          {\n            this.renderStory({\n              context: context\n            });\n            break;\n          }\n      }\n\n      this.previousMetadata = metadata;\n\n      if (!forceRender && metadata.viewMode !== 'docs') {\n        _global.document.documentElement.scrollTop = 0;\n        _global.document.documentElement.scrollLeft = 0;\n      }\n    }\n  }, {\n    key: \"applyLayout\",\n    value: function applyLayout(layout) {\n      var styles = layouts[layout] || layouts.padded;\n\n      if (styles !== this.previousStyles) {\n        Object.assign(_global.document.body.style, styles || {});\n        this.previousStyles = styles;\n      }\n    }\n  }, {\n    key: \"showErrorDisplay\",\n    value: function showErrorDisplay(_ref6) {\n      var _ref6$message = _ref6.message,\n          message = _ref6$message === void 0 ? '' : _ref6$message,\n          _ref6$stack = _ref6.stack,\n          stack = _ref6$stack === void 0 ? '' : _ref6$stack;\n      _global.document.getElementById('error-message').innerHTML = ansiConverter.toHtml(message);\n      _global.document.getElementById('error-stack').innerHTML = ansiConverter.toHtml(stack);\n\n      _global.document.body.classList.remove(classes.MAIN);\n\n      _global.document.body.classList.remove(classes.NOPREVIEW);\n\n      _global.document.body.classList.add(classes.ERROR);\n    }\n  }, {\n    key: \"showNoPreview\",\n    value: function showNoPreview() {\n      _global.document.body.classList.remove(classes.MAIN);\n\n      _global.document.body.classList.remove(classes.ERROR);\n\n      _global.document.body.classList.add(classes.NOPREVIEW);\n    }\n  }, {\n    key: \"showMain\",\n    value: function showMain() {\n      _global.document.body.classList.remove(classes.NOPREVIEW);\n\n      _global.document.body.classList.remove(classes.ERROR);\n\n      _global.document.body.classList.add(classes.MAIN);\n    }\n  }, {\n    key: \"showDocs\",\n    value: function showDocs() {\n      _global.document.getElementById('root').setAttribute('hidden', 'true');\n\n      _global.document.getElementById('docs-root').removeAttribute('hidden');\n    }\n  }, {\n    key: \"showStory\",\n    value: function showStory() {\n      _global.document.getElementById('docs-root').setAttribute('hidden', 'true');\n\n      _global.document.getElementById('root').removeAttribute('hidden');\n    }\n  }, {\n    key: \"renderStory\",\n    value: function renderStory(_ref7) {\n      var _this3 = this;\n\n      var context = _ref7.context,\n          _ref7$context = _ref7.context,\n          id = _ref7$context.id,\n          getDecorated = _ref7$context.getDecorated;\n\n      if (getDecorated) {\n        _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.prev = 0;\n                  _context.next = 3;\n                  return _this3.render(context);\n\n                case 3:\n                  _this3.channel.emit(_coreEvents[\"default\"].STORY_RENDERED, id);\n\n                  _context.next = 9;\n                  break;\n\n                case 6:\n                  _context.prev = 6;\n                  _context.t0 = _context[\"catch\"](0);\n\n                  _this3.renderException(_context.t0);\n\n                case 9:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, null, [[0, 6]]);\n        }))();\n      } else {\n        this.showNoPreview();\n        this.channel.emit(_coreEvents[\"default\"].STORY_MISSING, id);\n      }\n    }\n  }, {\n    key: \"renderDocs\",\n    value: function renderDocs(_ref9) {\n      var _this4 = this;\n\n      var context = _ref9.context,\n          storyStore = _ref9.storyStore;\n      var kind = context.kind,\n          parameters = context.parameters,\n          id = context.id;\n\n      if (id === '*' || !parameters) {\n        return;\n      }\n\n      var docs = parameters.docs || {};\n\n      if (docs.page && !docs.container) {\n        throw new Error('No `docs.container` set, did you run `addon-docs/preset`?');\n      }\n\n      var DocsContainer = docs.container || function (_ref10) {\n        var children = _ref10.children;\n        return /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, children);\n      };\n\n      var Page = docs.page || _NoDocs.NoDocs; // Docs context includes the storyStore. Probably it would be better if it didn't but that can be fixed in a later refactor\n\n      _reactDom[\"default\"].render( /*#__PURE__*/_react[\"default\"].createElement(DocsContainer, {\n        context: Object.assign({\n          storyStore: storyStore\n        }, context)\n      }, /*#__PURE__*/_react[\"default\"].createElement(Page, null)), _global.document.getElementById('docs-root'), function () {\n        return _this4.channel.emit(_coreEvents[\"default\"].DOCS_RENDERED, kind);\n      });\n    } // renderException is used if we fail to render the story and it is uncaught by the app layer\n\n  }, {\n    key: \"renderException\",\n    value: function renderException(err) {\n      this.channel.emit(_coreEvents[\"default\"].STORY_THREW_EXCEPTION, err);\n      this.showErrorDisplay(err); // Log the stack to the console. So, user could check the source code.\n\n      _clientLogger.logger.error(err);\n    } // renderError is used by the various app layers to inform the user they have done something\n    // wrong -- for instance returned the wrong thing from a story\n\n  }, {\n    key: \"renderError\",\n    value: function renderError(_ref11) {\n      var title = _ref11.title,\n          description = _ref11.description;\n      this.channel.emit(_coreEvents[\"default\"].STORY_ERRORED, {\n        title: title,\n        description: description\n      });\n      this.showErrorDisplay({\n        message: title,\n        stack: description\n      });\n    }\n  }]);\n\n  return StoryRenderer;\n}();\n\nexports.StoryRenderer = StoryRenderer;","map":{"version":3,"sources":["/home/leon/Documentos/proyectos/react/mascaras/client/node_modules/@storybook/core/dist/client/preview/StoryRenderer.js"],"names":["Object","defineProperty","exports","value","StoryRenderer","_react","_interopRequireDefault","require","_reactDom","_global","_ansiToHtml","_coreEvents","_clientLogger","_NoDocs","obj","__esModule","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","_createClass","protoProps","staticProps","prototype","layouts","centered","margin","padding","display","justifyContent","alignItems","minHeight","boxSizing","fullscreen","padded","classes","MAIN","NOPREVIEW","ERROR","ansiConverter","escapeXML","_ref","render","channel","storyStore","previousMetadata","previousStyles","setupListeners","_this","on","CURRENT_STORY_WAS_SET","renderCurrentStory","STORY_ARGS_UPDATED","forceReRender","GLOBALS_UPDATED","FORCE_RE_RENDER","forceRender","_this2","loadError","getError","showErrorDisplay","_ref2","getSelection","storyId","urlViewMode","viewMode","data","fromId","_ref3","kind","id","_ref3$parameters","parameters","getDecorated","docsOnly","layout","metadata","applyLayout","context","assign","showMain","showError","_ref4","title","description","renderError","showException","renderException","renderStoryIfChanged","_ref5","name","storyChanged","implementationChanged","viewModeChanged","kindChanged","emit","STORY_UNCHANGED","STORY_CHANGED","cleanHooksForKind","unmountComponentAtNode","document","getElementById","cleanHooks","showDocs","showStory","renderDocs","renderStory","documentElement","scrollTop","scrollLeft","styles","body","style","_ref6","_ref6$message","message","_ref6$stack","stack","innerHTML","toHtml","classList","remove","add","showNoPreview","setAttribute","removeAttribute","_ref7","_this3","_ref7$context","mark","_callee","wrap","_callee$","_context","prev","next","STORY_RENDERED","t0","stop","STORY_MISSING","_ref9","_this4","docs","page","container","Error","DocsContainer","_ref10","children","createElement","Fragment","Page","NoDocs","DOCS_RENDERED","STORY_THREW_EXCEPTION","logger","_ref11","STORY_ERRORED"],"mappings":"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","sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.symbol\");\n\nrequire(\"core-js/modules/es.symbol.description\");\n\nrequire(\"core-js/modules/es.function.name\");\n\nrequire(\"core-js/modules/es.object.assign\");\n\nrequire(\"core-js/modules/es.object.define-property\");\n\nrequire(\"core-js/modules/es.object.to-string\");\n\nrequire(\"core-js/modules/es.promise\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.StoryRenderer = void 0;\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactDom = _interopRequireDefault(require(\"react-dom\"));\n\nvar _global = require(\"global\");\n\nvar _ansiToHtml = _interopRequireDefault(require(\"ansi-to-html\"));\n\nvar _coreEvents = _interopRequireDefault(require(\"@storybook/core-events\"));\n\nvar _clientLogger = require(\"@storybook/client-logger\");\n\nvar _NoDocs = require(\"./NoDocs\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar layouts = {\n  centered: {\n    margin: 0,\n    padding: '1rem',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    minHeight: '100vh',\n    boxSizing: 'border-box'\n  },\n  fullscreen: {\n    margin: 0,\n    padding: 0,\n    display: 'block',\n    justifyContent: 'initial',\n    alignItems: 'initial',\n    minHeight: 'initial'\n  },\n  padded: {\n    margin: 0,\n    padding: '1rem',\n    display: 'block',\n    justifyContent: 'initial',\n    alignItems: 'initial',\n    minHeight: 'initial'\n  }\n};\nvar classes = {\n  MAIN: 'sb-show-main',\n  NOPREVIEW: 'sb-show-nopreview',\n  ERROR: 'sb-show-errordisplay'\n};\nvar ansiConverter = new _ansiToHtml[\"default\"]({\n  escapeXML: true\n});\n/**\n * StoryRenderer is responsible for rendering the correct story to the screen\n *\n * It is very much concerned with drawing to the screen and will do things like change classes\n * on the body etc.\n */\n\nvar StoryRenderer = /*#__PURE__*/function () {\n  function StoryRenderer(_ref) {\n    var render = _ref.render,\n        channel = _ref.channel,\n        storyStore = _ref.storyStore;\n\n    _classCallCheck(this, StoryRenderer);\n\n    this.render = void 0;\n    this.channel = void 0;\n    this.storyStore = void 0;\n    this.previousMetadata = void 0;\n    this.previousStyles = void 0;\n    this.render = render;\n    this.channel = channel;\n    this.storyStore = storyStore;\n    this.setupListeners();\n  }\n\n  _createClass(StoryRenderer, [{\n    key: \"setupListeners\",\n    value: function setupListeners() {\n      var _this = this;\n\n      // Channel can be null in StoryShots\n      if (this.channel) {\n        this.channel.on(_coreEvents[\"default\"].CURRENT_STORY_WAS_SET, function () {\n          return _this.renderCurrentStory(false);\n        });\n        this.channel.on(_coreEvents[\"default\"].STORY_ARGS_UPDATED, function () {\n          return _this.forceReRender();\n        });\n        this.channel.on(_coreEvents[\"default\"].GLOBALS_UPDATED, function () {\n          return _this.forceReRender();\n        });\n        this.channel.on(_coreEvents[\"default\"].FORCE_RE_RENDER, function () {\n          return _this.forceReRender();\n        });\n      }\n    }\n  }, {\n    key: \"forceReRender\",\n    value: function forceReRender() {\n      this.renderCurrentStory(true);\n    }\n  }, {\n    key: \"renderCurrentStory\",\n    value: function renderCurrentStory(forceRender) {\n      var _this2 = this;\n\n      var storyStore = this.storyStore;\n      var loadError = storyStore.getError();\n\n      if (loadError) {\n        this.showErrorDisplay(loadError);\n        return;\n      }\n\n      var _ref2 = storyStore.getSelection() || {},\n          storyId = _ref2.storyId,\n          urlViewMode = _ref2.viewMode;\n\n      var data = storyStore.fromId(storyId);\n\n      var _ref3 = data || {},\n          kind = _ref3.kind,\n          id = _ref3.id,\n          _ref3$parameters = _ref3.parameters,\n          parameters = _ref3$parameters === void 0 ? {} : _ref3$parameters,\n          getDecorated = _ref3.getDecorated;\n\n      var docsOnly = parameters.docsOnly,\n          layout = parameters.layout;\n      var metadata = {\n        id: id,\n        kind: kind,\n        viewMode: docsOnly ? 'docs' : urlViewMode,\n        getDecorated: getDecorated\n      };\n      this.applyLayout(metadata.viewMode === 'docs' ? 'fullscreen' : layout);\n      var context = Object.assign(Object.assign({\n        id: storyId\n      }, data), {}, {\n        forceRender: forceRender,\n        showMain: function showMain() {\n          return _this2.showMain();\n        },\n        showError: function showError(_ref4) {\n          var title = _ref4.title,\n              description = _ref4.description;\n          return _this2.renderError({\n            title: title,\n            description: description\n          });\n        },\n        showException: function showException(err) {\n          return _this2.renderException(err);\n        }\n      });\n      this.renderStoryIfChanged({\n        metadata: metadata,\n        context: context\n      });\n    }\n  }, {\n    key: \"renderStoryIfChanged\",\n    value: function renderStoryIfChanged(_ref5) {\n      var metadata = _ref5.metadata,\n          context = _ref5.context;\n      var forceRender = context.forceRender,\n          name = context.name;\n      var previousMetadata = this.previousMetadata,\n          storyStore = this.storyStore;\n      var storyChanged = !previousMetadata || previousMetadata.id !== metadata.id; // getDecorated is a function that returns a decorated story function. It'll change whenever the story\n      // is reloaded into the store, which means the module the story was defined in was HMR-ed.\n\n      var implementationChanged = !previousMetadata || previousMetadata.getDecorated !== metadata.getDecorated;\n      var viewModeChanged = !previousMetadata || previousMetadata.viewMode !== metadata.viewMode;\n      var kindChanged = !previousMetadata || previousMetadata.kind !== metadata.kind; // Don't re-render the story if nothing has changed to justify it\n\n      if (!forceRender && !storyChanged && !implementationChanged && !viewModeChanged) {\n        this.channel.emit(_coreEvents[\"default\"].STORY_UNCHANGED, Object.assign(Object.assign({}, metadata), {}, {\n          name: name\n        }));\n        return;\n      } // If we are rendering something new (as opposed to re-rendering the same or first story), emit\n\n\n      if (previousMetadata && (storyChanged || kindChanged || viewModeChanged)) {\n        this.channel.emit(_coreEvents[\"default\"].STORY_CHANGED, metadata.id);\n      }\n\n      switch (previousMetadata ? previousMetadata.viewMode : 'story') {\n        case 'docs':\n          if (kindChanged || viewModeChanged) {\n            this.storyStore.cleanHooksForKind(previousMetadata.kind);\n\n            _reactDom[\"default\"].unmountComponentAtNode(_global.document.getElementById('docs-root'));\n          }\n\n          break;\n\n        case 'story':\n        default:\n          if (previousMetadata && (storyChanged || viewModeChanged)) {\n            this.storyStore.cleanHooks(previousMetadata.id);\n\n            _reactDom[\"default\"].unmountComponentAtNode(_global.document.getElementById('root'));\n          }\n\n      } // Docs view renders into a different root ID to avoid conflicts\n      // with the user's view layer. Therefore we need to clean up whenever\n      // we transition between view modes\n\n\n      if (viewModeChanged) {\n        switch (metadata.viewMode) {\n          case 'docs':\n            {\n              this.showMain();\n              this.showDocs();\n              break;\n            }\n\n          case 'story':\n          default:\n            {\n              if (previousMetadata) {\n                this.showStory();\n              }\n            }\n        }\n      } // Given a cleaned up state, render the appropriate view mode\n\n\n      switch (metadata.viewMode) {\n        case 'docs':\n          {\n            this.renderDocs({\n              context: context,\n              storyStore: storyStore\n            });\n            break;\n          }\n\n        case 'story':\n        default:\n          {\n            this.renderStory({\n              context: context\n            });\n            break;\n          }\n      }\n\n      this.previousMetadata = metadata;\n\n      if (!forceRender && metadata.viewMode !== 'docs') {\n        _global.document.documentElement.scrollTop = 0;\n        _global.document.documentElement.scrollLeft = 0;\n      }\n    }\n  }, {\n    key: \"applyLayout\",\n    value: function applyLayout(layout) {\n      var styles = layouts[layout] || layouts.padded;\n\n      if (styles !== this.previousStyles) {\n        Object.assign(_global.document.body.style, styles || {});\n        this.previousStyles = styles;\n      }\n    }\n  }, {\n    key: \"showErrorDisplay\",\n    value: function showErrorDisplay(_ref6) {\n      var _ref6$message = _ref6.message,\n          message = _ref6$message === void 0 ? '' : _ref6$message,\n          _ref6$stack = _ref6.stack,\n          stack = _ref6$stack === void 0 ? '' : _ref6$stack;\n      _global.document.getElementById('error-message').innerHTML = ansiConverter.toHtml(message);\n      _global.document.getElementById('error-stack').innerHTML = ansiConverter.toHtml(stack);\n\n      _global.document.body.classList.remove(classes.MAIN);\n\n      _global.document.body.classList.remove(classes.NOPREVIEW);\n\n      _global.document.body.classList.add(classes.ERROR);\n    }\n  }, {\n    key: \"showNoPreview\",\n    value: function showNoPreview() {\n      _global.document.body.classList.remove(classes.MAIN);\n\n      _global.document.body.classList.remove(classes.ERROR);\n\n      _global.document.body.classList.add(classes.NOPREVIEW);\n    }\n  }, {\n    key: \"showMain\",\n    value: function showMain() {\n      _global.document.body.classList.remove(classes.NOPREVIEW);\n\n      _global.document.body.classList.remove(classes.ERROR);\n\n      _global.document.body.classList.add(classes.MAIN);\n    }\n  }, {\n    key: \"showDocs\",\n    value: function showDocs() {\n      _global.document.getElementById('root').setAttribute('hidden', 'true');\n\n      _global.document.getElementById('docs-root').removeAttribute('hidden');\n    }\n  }, {\n    key: \"showStory\",\n    value: function showStory() {\n      _global.document.getElementById('docs-root').setAttribute('hidden', 'true');\n\n      _global.document.getElementById('root').removeAttribute('hidden');\n    }\n  }, {\n    key: \"renderStory\",\n    value: function renderStory(_ref7) {\n      var _this3 = this;\n\n      var context = _ref7.context,\n          _ref7$context = _ref7.context,\n          id = _ref7$context.id,\n          getDecorated = _ref7$context.getDecorated;\n\n      if (getDecorated) {\n        _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n          return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.prev = 0;\n                  _context.next = 3;\n                  return _this3.render(context);\n\n                case 3:\n                  _this3.channel.emit(_coreEvents[\"default\"].STORY_RENDERED, id);\n\n                  _context.next = 9;\n                  break;\n\n                case 6:\n                  _context.prev = 6;\n                  _context.t0 = _context[\"catch\"](0);\n\n                  _this3.renderException(_context.t0);\n\n                case 9:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, null, [[0, 6]]);\n        }))();\n      } else {\n        this.showNoPreview();\n        this.channel.emit(_coreEvents[\"default\"].STORY_MISSING, id);\n      }\n    }\n  }, {\n    key: \"renderDocs\",\n    value: function renderDocs(_ref9) {\n      var _this4 = this;\n\n      var context = _ref9.context,\n          storyStore = _ref9.storyStore;\n      var kind = context.kind,\n          parameters = context.parameters,\n          id = context.id;\n\n      if (id === '*' || !parameters) {\n        return;\n      }\n\n      var docs = parameters.docs || {};\n\n      if (docs.page && !docs.container) {\n        throw new Error('No `docs.container` set, did you run `addon-docs/preset`?');\n      }\n\n      var DocsContainer = docs.container || function (_ref10) {\n        var children = _ref10.children;\n        return /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, children);\n      };\n\n      var Page = docs.page || _NoDocs.NoDocs; // Docs context includes the storyStore. Probably it would be better if it didn't but that can be fixed in a later refactor\n\n      _reactDom[\"default\"].render( /*#__PURE__*/_react[\"default\"].createElement(DocsContainer, {\n        context: Object.assign({\n          storyStore: storyStore\n        }, context)\n      }, /*#__PURE__*/_react[\"default\"].createElement(Page, null)), _global.document.getElementById('docs-root'), function () {\n        return _this4.channel.emit(_coreEvents[\"default\"].DOCS_RENDERED, kind);\n      });\n    } // renderException is used if we fail to render the story and it is uncaught by the app layer\n\n  }, {\n    key: \"renderException\",\n    value: function renderException(err) {\n      this.channel.emit(_coreEvents[\"default\"].STORY_THREW_EXCEPTION, err);\n      this.showErrorDisplay(err); // Log the stack to the console. So, user could check the source code.\n\n      _clientLogger.logger.error(err);\n    } // renderError is used by the various app layers to inform the user they have done something\n    // wrong -- for instance returned the wrong thing from a story\n\n  }, {\n    key: \"renderError\",\n    value: function renderError(_ref11) {\n      var title = _ref11.title,\n          description = _ref11.description;\n      this.channel.emit(_coreEvents[\"default\"].STORY_ERRORED, {\n        title: title,\n        description: description\n      });\n      this.showErrorDisplay({\n        message: title,\n        stack: description\n      });\n    }\n  }]);\n\n  return StoryRenderer;\n}();\n\nexports.StoryRenderer = StoryRenderer;"]},"metadata":{},"sourceType":"script"}